---
layout: post
title: "VueJS 之 “基础篇（一）"
date: 2017-08-26
tag: VueJS 之 “基础篇（一） 
---  
###  涉及知识点: 
> 1.style与class <br>
> 2.vcomputed、directive、filter <br>
> 3.watch 侦听Data数据的变化 <br>
>4.生命周期: beforeCreate、create、beforeMount、mounted、beforeUpdate、updated、destroyed <br>
>5.this.$refs、$el、$data、$watch <br>
>6.v-bind缩写:、v-on缩写@ 
### Vue2.0
```bash
 一、Vue的MVVM实现的原理？

    ViewModel是Vue.js的核心，Vue实例是作用于某一个HTML元素上的，这个元素可以是HTML的body元素，也可以是指定了id的某个元素

    DOM Listeners 和 Data Bindings看作两个工具，它们是实现双向绑定的关键。

    从view层来看，ViewModel中的DOM Listeners工具会帮我们监测页面上DOM元素的变化，如果有变化，则更改Model中的数据；

    从Model层来看，当我们更新Model中的数据时，Data Bindings工具会帮我们更新页面中的DOM元素。

二、Vue使用

    1、页面加载vue.js文件  <script src="vue.js"></script>

    2、npm下载vue包, npm install vue --save-dev
```
### 双向绑定
```bash
 <div id="app">
    <input type="text" v-model="message">
    {{ message }}
</div>

new Vue({
    el: '#app',
    data: {
        message: 'hello world'
    }
})
```
### 生命周期

```bash
一、构造器

    1、每个构造器都是通过创建一个Vue的实例启动的

        var vm = new Vue({
            // ...    
        })

    2、扩展构造器

        通过扩展构造器可以创建可复用的组件构造器

        var MyComponent = Vue.extend({
            // 扩展选项
        })

二、生命周期

    1、beforeCreate(): 实例初始化，数据观测(data observer)和事件（event/watcher）配置之前被调用

    2、create(): 实例创建完后被调用，完成了数据观测(data observer)和事件（event/watcher）回调，但还挂载还没开始$el属性不可见

    3、beforeMount(): 在挂载开始之前调用，render()函数被调用

    4、mounted(): el被创建的vm.$el替换，挂载到实例上调用钩子

    5、beforeUpdate(): 数据更新时调用，在虚拟DOM重新渲染

    6、updated(): 数据更改导致虚拟DOM重新渲染

    7、destroyed(): 卸载组件

    <script>
        var vm = new Vue({
            el: '#app',
            data: {
                message: 'siguang'
            },
            methods: {
                showMessage: function(){
                    console.log(this.message);
                },
                deleteVue: function(){
                    vm.$destroy();          // 消毁Vue实例
                }
            },

            // new Vue后执行开始
            beforeCreate: function(){
                console.log('beforeCreate');
            },

            // Vue实例创建被调用
            create: function(){
                console.log('create');
            },


            mounted: function(){
                console.log('mounted');
            },

            // 数据更新后执行的回调
            beforeUpdate: function(){    
                console.log('beforeUpdate');     
            },
            updated: function(){    
                console.log('updated');     
            },

            // 消毁时触发
            destroyed: function(){
                console.log('destroyed');
            }

        });
    </script>
```
### 数据绑定

```bash
一、文本绑定:  <p>{{ data.name }}</p>    与 <p v-text="data.name"></p> 相同

二、html绑定:  <p v-html="data.strHtml"></p>

三、绑定的值可以html中: 

    <div id="item-{{id}}"></div>

    <div :id="userId"></div>

四、表达式:  {{ dat.num == 1 }}、 {{ num ? 'yes' : 'no' }}、 {{if(ok) {return message} }}

五、过滤器:  {{ message | capitalize }}

    连续过滤器:  {{ message | filterA | filterB }}
```
### 常用指令

```bash
指令: 以 v- 开头

    <div v-if="greeting == 1"></div>

    带参数: <a v-bind:href="url"></a>

一、v-if、v-else-if条件渲染: 

    <div v-if="type === 'A'">A</div>
    <div v-else-if="type === 'B'">B</div>
    <div v-else-if="type === 'C'">C</div>
    <div v-else>Not A/B/C</div>

二、v-show: 显示还是隐藏元素，用的display

三、v-for: 循环数据来渲染列表

    $index: 索引        $key: 

    * 数组/数组对象循环: 

        <li v-for="item in items" :key="item">{{ item.message }}</li>

        或者:
        <li v-for="(val, index) in objList" :key="index">
            {{index}}. {{key}} : {{val.type}}
           </li>

    * 对象循环: index下标    key对象的key   val对象属性值

        <li v-for="(val, index) in objList" :key="index">
            {{index}}. {{key}} : {{val.type}}
           </li>

    * filterBy()、orderBy()过滤器

    **** 注意在使用2.2.0以上版本时 ****
    @key是必要属性否则就会报警告

        1）<el-row class="pt20 w50" v-for="method in payMethods" :key="method.label">        // 数据

        2）<el-option
                v-for="(item,index) in payMethods"
                :key="index"
                :label="item.label"
                :value="item.value">
            </el-option>


四、v-model: 绑定值，这也是MVVM的关键点

    可以对文本表单、单选框 、多选框、下拉菜单进行绑定值

    参数特性:

        1）lazy: 不是输入时就进行同步而是在change的时候才对数据进行同步

            <input type="text" v-model="msg" lazy /> {{msg}}

        2）number: 将用户输入的转成Number型，如果返回NaN那就返回原值

        3）debounce: 设置一个最小延时，否则如果输入是ajax请求，每次敲击都会去请求

            <input type="text" debounce="500" v-model="msg">        // 按完键500毫秒后在进行

    获取checkbox值:

        <input type="checkbox" v-model="toggle" v-bind:true-value="a" v-bind:false-value="b">

        // 当选中时
        vm.toggle === vm.a

        // 当没有选中时
        vm.toggle === vm.b


五、v-bind: 绑定到HTML元素上，v-bind:class="active"

    v-bind缩写: ":" <a :href='url'></a>


六、v-on: 用于监听DOM事件 v-on:click="doSomeThing"

    v-on缩写: "@" <div @click="doSomeing"></div>


七、v-ref: 访问子组件

    2.0后 v-el和v-ref合成了一个 ref属性，组件实例中通过 $refs 来调用 

    <div ref="box">xxxx</div>
    <el-button type="primary" slot="append" @click="getRefs">发送</el-button>

    {
        methods:{
            getRefs(){
                console.log(this.$refs.box.innerHTML);
            }
        }
    }

    如果绑定一个元素使用 :ref='item'
    <p v-for="item in items" :ref="item"></p>


八、v-pre: 跳过这个元素和它的子元素的编译过程，这样加快了编译的速度

    <div v-pre>{{ 这里不用框架来编译 }}</div>

九、v-cloak:

十、v-once: 只渲染元素和组件一次，之后的渲染都会跳过次元素

    <span v-once>xxxxx</span>
```
### 参考资料
> [https://github.com/pablohpsilva/vuejs-component-style-guide/blob/master/README-CN.md#%E5%9F%BA%E4%BA%8E%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91 /]( https://github.com/pablohpsilva/vuejs-component-style-guide/blob/master/README-CN.md#%E5%9F%BA%E4%BA%8E%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91/)Vue代码规范

版权归属，汪文涛的博客：[http://gzwwt2016.github.io](http://gzwwt2016.github.io) 谢谢！
